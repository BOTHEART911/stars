<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Universo Galáctico</title>
  <style>
    html, body {
      width: 100vw; height: 100vh;
      margin: 0; padding: 0;
      background: transparent;
      overflow: hidden;
    }
    #universe {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      pointer-events: none;
      background: transparent;
      z-index: 1;
    }
  </style>
</head>
<body>
<canvas id="universe"></canvas>
<script>
const canvas = document.getElementById('universe');
const ctx = canvas.getContext('2d');
let width = window.innerWidth;
let height = window.innerHeight;

function resize() {
  width = window.innerWidth;
  height = window.innerHeight;
  canvas.width = width;
  canvas.height = height;
}
window.addEventListener('resize', resize);
resize();

// CONFIGURACIÓN GALAXIAS
const GALAXY_COUNT = 6;
const STARS_PER_GALAXY = 48;
const galaxies = [];

// Generar galaxias en posiciones y tamaños aleatorios
for (let g = 0; g < GALAXY_COUNT; g++) {
  // Centro de la galaxia:
  const cx = Math.random() * width * 0.8 + width * 0.1;
  const cy = Math.random() * height * 0.8 + height * 0.1;
  // Radio de la galaxia:
  const baseRadius = Math.random() * 80 + 50;
  // Velocidad de rotación:
  const rotationSpeed = (Math.random() * 0.06 + 0.02) * (Math.random() < 0.5 ? 1 : -1);
  // Color base (blanco, azul, dorado, violeta)
  const hues = [210, 60, 50, 280];
  const hue = hues[Math.floor(Math.random()*hues.length)];
  const galaxy = {
    cx, cy, baseRadius, rotationSpeed, rotation: Math.random()*Math.PI*2, hue,
    stars: []
  };
  // Generar estrellas en espiral
  for (let s = 0; s < STARS_PER_GALAXY; s++) {
    const arm = s % 3;
    const angle = (s / STARS_PER_GALAXY) * Math.PI * 4 + arm * (Math.PI*2/3) + Math.random()*0.12;
    const r = (s / STARS_PER_GALAXY) * baseRadius * (0.6 + Math.random()*0.7);
    galaxy.stars.push({
      angle,
      r,
      size: Math.pow(Math.random(), 2.5) * 2.3 + 0.2,
      twinklePhase: Math.random()*Math.PI*2,
      twinkleSpeed: Math.random()*0.6 + 0.2,
      baseAlpha: Math.random()*0.5 + 0.45,
      offset: Math.random()*1000
    });
  }
  galaxies.push(galaxy);
}

// Fondo de estrellas diminutas lejanas
const BG_STAR_COUNT = 120;
const bgStars = [];
for (let i = 0; i < BG_STAR_COUNT; i++) {
  bgStars.push({
    x: Math.random() * width,
    y: Math.random() * height,
    alpha: Math.random() * 0.2 + 0.05,
    size: Math.random() * 0.9 + 0.1,
    twinkleSpeed: Math.random() * 0.7 + 0.2,
    twinklePhase: Math.random()*Math.PI*2
  });
}

function draw() {
  ctx.clearRect(0, 0, width, height);

  // Fondo: estrellas muy lejanas
  for (let i = 0; i < bgStars.length; i++) {
    const star = bgStars[i];
    const twinkle = 0.4 + 0.6 * Math.abs(Math.sin(performance.now() * 0.0002 * star.twinkleSpeed + star.twinklePhase));
    ctx.beginPath();
    ctx.arc(star.x, star.y, star.size, 0, 2 * Math.PI);
    ctx.fillStyle = `rgba(255,255,255,${star.alpha*twinkle})`;
    ctx.shadowColor = 'white';
    ctx.shadowBlur = 3;
    ctx.fill();
    ctx.shadowBlur = 0;
  }

  // Galaxias
  for (let g = 0; g < galaxies.length; g++) {
    const galaxy = galaxies[g];
    galaxy.rotation += galaxy.rotationSpeed * 0.001;

    // Galaxia: estrellas en espiral
    for (let s = 0; s < galaxy.stars.length; s++) {
      const star = galaxy.stars[s];
      // Posición en espiral rotando
      const angle = star.angle + galaxy.rotation;
      const x = galaxy.cx + Math.cos(angle) * star.r;
      const y = galaxy.cy + Math.sin(angle) * star.r;
      // Parpadeo lento
      const t = performance.now()*0.00028*star.twinkleSpeed + star.twinklePhase + star.offset;
      const twinkle = 0.7 + 0.5 * Math.sin(t);
      // Color y brillo
      const color = `hsla(${galaxy.hue}, 100%, 85%, ${star.baseAlpha * twinkle})`;

      ctx.beginPath();
      ctx.arc(x, y, star.size, 0, 2 * Math.PI);
      ctx.fillStyle = color;
      ctx.shadowColor = `hsla(${galaxy.hue}, 100%, 95%, 0.7)`;
      ctx.shadowBlur = 8 + star.size*6;
      ctx.fill();
      ctx.shadowBlur = 0;
    }
  }

  requestAnimationFrame(draw);
}

draw();
</script>
</body>
</html>
